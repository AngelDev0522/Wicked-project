(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1141:function(e,t,a){"use strict";a.r(t);var n=a(5),l=a(59),r=a(60),i=a(62),c=a(61),o=a(63),s=a(2),d=a.n(s),u=a(39),m=a(48),h=a(403),f=a(404),p=a(939),y=a(31),g=a(335),b=a(330),E=a(969),C=a(974),k=a(1137),v=a(971),x=a(941),S=a(1124),w=a(496),A=a(1136),N=a(707),D=(a(1071),N.d.create({table:{borderStyle:"solid",borderWidth:2,width:599,display:"flex",flexDirection:"row",flexWrap:"wrap"},tableRow:{position:"relative",display:"flex",width:594,flexDirection:"row",borderStyle:"solid",borderWidth:1,borderBottomWidth:0},tableCol1:{borderStyle:"solid",borderWidth:1,width:198,position:"relative",borderLeftWidth:0,borderTopWidth:0},tableCol3:{width:593,height:"100%",display:"flex",flexDirection:"row",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,borderBottomWidth:0},colTop:{position:"absolute",display:"flex",flexDirection:"row",height:"50%",width:"100%",top:0,right:0,paddingLeft:20,paddingRight:20},colBottom:{position:"absolute",height:"50%",bottom:0,width:"100%",marginLeft:"auto",marginRight:"auto",right:0,paddingLeft:10,paddingRight:10},textAlignR:{display:"flex",flexDirection:"column",justifyContent:"center",paddingTop:10,fontSize:14,height:"100%",width:"35%",textAlign:"right"},textAlignC:{display:"flex",flexDirection:"column",justifyContent:"center",paddingTop:10,fontSize:14,height:"100%",width:"30%",textAlign:"center"},textAlignL:{display:"flex",flexDirection:"column",justifyContent:"center",paddingTop:10,fontSize:14,height:"100%",width:"35%",textAlign:"left"},textAddress:{display:"flex",flexDirection:"column",justifyContent:"center",paddingTop:10,paddingLeft:15,paddingRight:15,fontSize:12,width:"100%",height:"100%",textAlign:"center"}}));function j(e){var t=e.printSetting,a=e.data;return d.a.createElement(N.a,null,d.a.createElement(N.c,{style:{margin:"0 auto",size:"A4"}},d.a.createElement(N.f,{style:D.table},a.map(function(e,a){return d.a.createElement(N.f,{key:a,style:Object(n.a)({},D.tableCol1,{height:"35"===t.format?92:67})},d.a.createElement(N.f,{style:D.colTop},d.a.createElement(N.e,{style:D.textAlignR},"blank"===t.title?"":e.title),d.a.createElement(N.e,{style:D.textAlignC},"nric"===t.name?e.nricName:e.preferredName),d.a.createElement(N.e,{style:D.textAlignL},"blank"===t.suffix?"":"family"===t.suffix?"& Family":e.family?"& Family":"")),d.a.createElement(N.f,{style:D.colBottom},d.a.createElement(N.e,{style:D.textAddress},"address"===t.address?e.address:e.companyaddress)))}))))}var O=a(1072),P=k.a.Search,R=v.a.Option,F=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).handleDeleteCancel=function(){a.setState({deleteVisible:!1,selectedField:null})},a.handlePrintCancel=function(){a.setState({printVisible:!1})},a.handlePrintChange=function(e){var t=Object(n.a)({},a.state.printSetting),l=e.target,r=l.name,i=l.value;t[r]=i,a.setState({printSetting:t})},a.handleCategoryChange=function(e){a.props.getClientsByCategory(e)},a.onDelete=function(e){a.props.deleteClient(e)},a.onHandleSelect=function(e){if(e.checked=!e.checked,a.setState(Object(n.a)({},a.state.selectedArray,{value:e})),e.checked)a.state.printArray.push(e);else for(var t=0;t<a.state.printArray.length;t++)a.state.printArray._id===e._id&&a.state.printArray.splice(t,1)},a.onHandleSelectAll=function(e){for(var t=a.state.selectedArray,n=[],l=0;l<t.length;l++)t[l].checked=e.target.checked;e.target.checked&&(n=a.state.selectedArray),a.setState({selectedArray:t,printArray:n})},a.columns=[{title:function(){return d.a.createElement("span",null,d.a.createElement(x.a,{onChange:a.onHandleSelectAll}))},key:"checked",render:function(e,t){return d.a.createElement("span",null,d.a.createElement(x.a,{onChange:function(){a.onHandleSelect(e)},checked:e.checked}))}},{title:"Name",dataIndex:"nricName",key:"name",render:function(e,t){return"".concat(e," (").concat(t.preferredName,")")},sorter:function(e,t){return e.nricName.length-t.nricName.length}},{title:"Contact",dataIndex:"contact",key:"contact"},{title:"Birth Date",dataIndex:"dob",key:"dob",sorter:function(e,t){return new Date(t.dob)-new Date(e.dob)},render:function(e){return e?Object(E.a)(Object(C.a)(e),"yyyy/MM/dd"):null}},{title:"Next Followup Date",key:"tags",dataIndex:"nextFollowUpDate",sorter:function(e,t){return new Date(t.dob)-new Date(e.dob)},render:function(e){return e?Object(E.a)(Object(C.a)(e),"yyyy/MM/dd"):null}},{title:"Action",key:"action",render:function(e,t){return d.a.createElement("span",null,d.a.createElement(m.b,{to:"/clients/".concat(t._id,"/view")},"View"),d.a.createElement(S.a,{type:"vertical"}),d.a.createElement(m.b,{to:"/clients/".concat(t._id,"/Edit")},"Edit"),d.a.createElement(S.a,{type:"vertical"}),d.a.createElement("span",{onClick:function(e){a.setState({deleteVisible:!0,selectedField:t._id})}},d.a.createElement("a",{className:"fa fa-trash","aria-hidden":"true"})))}}],a.state={user:Object(y.a)(),key:"",deleteVisible:!1,printVisible:!1,selectedField:null,csvHeader:[{label:"NRICName",key:"nricName"},{label:"PreferredName",key:"preferredName"},{label:"Dateofbirth",key:"dob"},{label:"E-mail",key:"email"},{label:"ContactNo",key:"contact"},{label:"ContactNo2",key:"contact2"},{label:"Gender",key:"gender"},{label:"Category",key:"category"},{label:"Race",key:"race"},{label:"Nationality",key:"nationality"},{label:"Occupation",key:"occupation"},{label:"Company Name",key:"companyname"},{label:"Company Address",key:"companyaddress"},{label:"Address",key:"address"},{label:"Family",key:"family"},{label:"Family Relationship",key:"familyrelationship"},{label:"Last Purchase",key:"lastpurchasae"},{label:"Next followup date",key:"nextFollowUpDate"}],csvData:[],selectedArray:[],printArray:[],printSetting:{title:"blank",name:"nric",suffix:"blank",address:"address",format:"35"}},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.getClients(),this.props.getUser(this.state.user.id)}},{key:"componentWillReceiveProps",value:function(e){if(e.clients!==this.props.clients&&this.setState({csvData:e.clients}),e.clients.length){for(var t=e.clients,a=0;a<t.length;a++)t[a].checked=!1;this.setState({selectedArray:t})}}},{key:"handleChange",value:function(e){this.props.getClients(e)}},{key:"render",value:function(){var e=this,t=this.props.user,a=[];if(t.categories)for(var n=0;n<t.categories.length;n++)a.push(d.a.createElement(R,{key:t.categories[n]},t.categories[n]));return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:""},this.props.loading&&d.a.createElement(b.a,null),d.a.createElement(h.a,null,d.a.createElement(f.a,null,d.a.createElement("div",{className:"page-title-box"},d.a.createElement(h.a,null,d.a.createElement(f.a,{lg:2},d.a.createElement("h4",{className:"page-title"},"Clients")),d.a.createElement(f.a,{lg:10,className:"mt-lg-3 text-right"},d.a.createElement(P,{placeholder:"",style:{width:200,marginRight:20},onSearch:this.handleChange.bind(this),allowClear:!0}),this.props.user.categories&&d.a.createElement(v.a,{style:{width:200,marginRight:20},mode:"tags",placeholder:"Please select",onChange:this.handleCategoryChange},a),d.a.createElement(m.b,{to:"/clients/add",style:{marginRight:20}},d.a.createElement(w.a,{type:"primary",ghost:!0},"Add Client")),d.a.createElement(w.a,{type:"primary",onClick:function(){e.setState({printVisible:!0})},ghost:!0},"Label Printing"),"\xa0\xa0",d.a.createElement(O.CSVLink,{className:"btn btn-success",data:this.state.csvData,headers:this.state.csvHeader,filename:"my-file.csv"},"Export")))))),d.a.createElement(h.a,null,d.a.createElement(f.a,{lg:12},d.a.createElement(A.a,{columns:this.columns,rowKey:"_id",dataSource:this.state.selectedArray})))),d.a.createElement(p.a,{visible:this.state.deleteVisible,footer:[d.a.createElement(w.a,{type:"primary",onClick:function(){e.handleDeleteCancel(),e.onDelete(e.state.selectedField),e.handleChange(e)}},"Confirm"),d.a.createElement(w.a,{type:"primary",onClick:this.handleDeleteCancel.bind(this)},"Cancel")],onCancel:this.handleDeleteCancel,zIndex:1051},d.a.createElement("p",null,"Are you sure?")),d.a.createElement(p.a,{visible:this.state.printVisible,footer:[d.a.createElement(N.b,{document:d.a.createElement(j,{data:this.state.printArray,printSetting:this.state.printSetting}),fileName:"FinancialPortfolio.pdf"},d.a.createElement(w.a,{type:"primary",style:{marginRight:"20px"}},"Print")),d.a.createElement(w.a,{type:"primary",onClick:this.handlePrintCancel.bind(this)},"Cancel")],onCancel:this.handlePrintCancel,zIndex:1051},d.a.createElement("table",{className:"table table-bordered"},d.a.createElement("tbody",null,d.a.createElement("tr",null,d.a.createElement("th",null,"Title"),d.a.createElement("th",null,d.a.createElement("select",{name:"title",onChange:this.handlePrintChange,value:this.state.printSetting.title},d.a.createElement("option",{value:"blank"},"(Blank)"),d.a.createElement("option",{value:"salution"},"Salutation")))),d.a.createElement("tr",null,d.a.createElement("th",null,"Name"),d.a.createElement("th",null,d.a.createElement("select",{name:"name",onChange:this.handlePrintChange,value:this.state.printSetting.name},d.a.createElement("option",{value:"nric"},"NRIC Name"),d.a.createElement("option",{value:"preferred"},"Preferred Name")))),d.a.createElement("tr",null,d.a.createElement("th",null,"Suffix"),d.a.createElement("th",null,d.a.createElement("select",{name:"suffix",onChange:this.handlePrintChange,value:this.state.printSetting.suffix},d.a.createElement("option",{value:"blank"},"(Blank)"),d.a.createElement("option",{value:"family"},'Insert "& Family" for all clients'),d.a.createElement("option",{value:"detail"},'Insert "& Family" for clients with family details')))),d.a.createElement("tr",null,d.a.createElement("th",null,"Address"),d.a.createElement("th",null,d.a.createElement("select",{name:"address",onChange:this.handlePrintChange,value:this.state.printSetting.address},d.a.createElement("option",{value:"address"},"Address"),d.a.createElement("option",{value:"company"},"Company Address")))),d.a.createElement("tr",null,d.a.createElement("th",null,"Format"),d.a.createElement("th",null,d.a.createElement("select",{name:"format",onChange:this.handlePrintChange,value:this.state.printSetting.format},d.a.createElement("option",{value:"35"},"70 by 35mm label"),d.a.createElement("option",{value:"25.4"},"70 by 25.4mm label"))))))))}}]),t}(s.Component);t.default=Object(u.b)(function(e){var t=e.User;return{user:t.user,clients:t.clients,deleteClientSuccess:t.deleteClientSuccess,loading:t.loading,error:t.error}},{getUser:g.q,getClients:g.k,getClientsByCategory:g.l,deleteClient:g.g})(F)},330:function(e,t,a){"use strict";var n=a(59),l=a(60),r=a(62),i=a(61),c=a(63),o=a(2),s=a.n(o),d=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"preloader"},s.a.createElement("div",{className:"status"},s.a.createElement("div",{className:"spinner-border avatar-sm text-primary m-2",role:"status"})))}}]),t}(o.Component);t.a=d},335:function(e,t,a){"use strict";var n=a(20);a.d(t,"s",function(){return n.c}),a.d(t,"t",function(){return n.f}),a.d(t,"u",function(){return n.g});var l=a(6);a.d(t,"a",function(){return l.a}),a.d(t,"c",function(){return l.d}),a.d(t,"d",function(){return l.g}),a.d(t,"e",function(){return l.j}),a.d(t,"g",function(){return l.m}),a.d(t,"h",function(){return l.p}),a.d(t,"i",function(){return l.s}),a.d(t,"j",function(){return l.v}),a.d(t,"k",function(){return l.y}),a.d(t,"l",function(){return l.z}),a.d(t,"o",function(){return l.E}),a.d(t,"p",function(){return l.H}),a.d(t,"q",function(){return l.K}),a.d(t,"r",function(){return l.N}),a.d(t,"w",function(){return l.Q}),a.d(t,"x",function(){return l.R}),a.d(t,"y",function(){return l.V}),a.d(t,"z",function(){return l.Z}),a.d(t,"B",function(){return l.cb});var r=a(38);a.d(t,"b",function(){return r.a}),a.d(t,"f",function(){return r.c}),a.d(t,"m",function(){return r.f}),a.d(t,"n",function(){return r.g}),a.d(t,"v",function(){return r.h}),a.d(t,"A",function(){return r.i})},833:function(e,t){},834:function(e,t){}}]);
//# sourceMappingURL=27.ae4bc67b.chunk.js.map